// ë°±ë§Œì¥ì ë¨¸ë‹ˆíŒ¨í„´ ì‹¬ë¦¬ì§„ë‹¨ì§€ - ê²°ê³¼ í˜ì´ì§€ JavaScript

// 5ê°€ì§€ ë¨¸ë‹ˆíŒ¨í„´ ìœ í˜• ì •ì˜ (diagnosis.jsì™€ ë™ì¼)
const patternTypes = {
    'íŒ”ë‘ê·€': {
        name: 'íŒ”ë‘ê·€í˜•',
        emoji: 'ğŸ‘‚',
        shortDescription: 'ì£¼ë³€ ì˜ê²¬ì— ì‰½ê²Œ í”ë“¤ë¦¬ëŠ”',
        description: 'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì˜ê²¬ì´ë‚˜ ì¶”ì²œì— ì‰½ê²Œ ì˜í–¥ì„ ë°›ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ì‚¬íšŒì  ê´€ê³„ë¥¼ ì¤‘ì‹œí•˜ë©°, ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ì˜ ì¡°í™”ë¥¼ ìœ„í•´ ì§€ì¶œí•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.',
        characteristics: ['ì‚¬íšŒì  ì˜í–¥ì— ë¯¼ê°', 'íƒ€ì¸ì˜ ì¶”ì²œì„ ì‹ ë¢°', 'ê´€ê³„ ì§€í–¥ì  ì†Œë¹„', 'ë™ì¡° ì„±í–¥'],
        color: '#f59e0b',
        gradient: 'from-yellow-500 to-orange-500'
    },
    'ì§ˆëŸ¬': {
        name: 'ì§ˆëŸ¬í˜•',
        emoji: 'ğŸ’¸',
        shortDescription: 'ì¶©ë™ì ì´ê³  ì¦‰í¥ì ì¸',
        description: 'ê³„íšë³´ë‹¤ëŠ” ì¶©ë™ì— ë”°ë¼ í–‰ë™í•˜ë©°, í˜„ì¬ì˜ ë§Œì¡±ì„ ìš°ì„ ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ì¦‰í¥ì ì¸ êµ¬ë§¤ë‚˜ íˆ¬ì ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.',
        characteristics: ['ì¶©ë™ì  ì†Œë¹„', 'ì¦‰í¥ì  ê²°ì •', 'í˜„ì¬ ì§€í–¥ì ', 'ê°ì •ì  êµ¬ë§¤'],
        color: '#ef4444',
        gradient: 'from-red-500 to-pink-500'
    },
    'ì™„ë²½': {
        name: 'ì™„ë²½í˜•',
        emoji: 'ğŸ¯',
        shortDescription: 'ì‹ ì¤‘í•˜ê³  ê³„íšì ì¸',
        description: 'ëª¨ë“  ê²ƒì„ ê¼¼ê¼¼íˆ ë”°ì ¸ë³´ê³  ê³„íšì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ìœ„í—˜ì„ ìµœì†Œí™”í•˜ê³  ì•ˆì •ì„±ì„ ì¶”êµ¬í•˜ë©°, ì™„ë²½í•œ ê²°ì •ì„ ë‚´ë¦¬ë ¤ê³  ë…¸ë ¥í•©ë‹ˆë‹¤.',
        characteristics: ['ê³„íšì  ì ‘ê·¼', 'ìœ„í—˜ íšŒí”¼', 'ì •ë³´ ìˆ˜ì§‘', 'ì‹ ì¤‘í•œ ê²°ì •'],
        color: '#10b981',
        gradient: 'from-green-500 to-emerald-500'
    },
    'ë‚˜ì˜ë‚˜': {
        name: 'ë‚˜ì˜ë‚˜í˜•',
        emoji: 'ğŸ’',
        shortDescription: 'ìê¸°ê³¼ì‹œë¥¼ ì¦ê¸°ëŠ”',
        description: 'ìì‹ ì˜ ì„±ê³µì´ë‚˜ ëŠ¥ë ¥ì„ ë“œëŸ¬ë‚´ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ë©°, ê°œì„±ê³¼ ìŠ¤íƒ€ì¼ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. ë‚¨ë“¤ì—ê²Œ ë³´ì—¬ì§€ëŠ” ê²ƒì„ ì˜ì‹í•œ ì†Œë¹„ë¥¼ í•©ë‹ˆë‹¤.',
        characteristics: ['ê³¼ì‹œì  ì†Œë¹„', 'ìê¸°í‘œí˜„ ì¤‘ì‹œ', 'ë¸Œëœë“œ ì„ í˜¸', 'ìŠ¤íƒ€ì¼ ì¶”êµ¬'],
        color: '#8b5cf6',
        gradient: 'from-purple-500 to-violet-500'
    },
    'ìŸì·¨': {
        name: 'ìŸì·¨í˜•',
        emoji: 'ğŸ†',
        shortDescription: 'ì„±ì·¨ìš•ì´ ê°•í•œ',
        description: 'ëª©í‘œ ë‹¬ì„±ê³¼ ê²½ìŸì—ì„œ ì´ê¸°ëŠ” ê²ƒì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤. íˆ¬ìë‚˜ ì¬ì • ê´€ë¦¬ë¥¼ ê²Œì„ì´ë‚˜ ê²½ìŸìœ¼ë¡œ ì—¬ê¸°ë©°, ë†’ì€ ì„±ì·¨ë¥¼ ì¶”êµ¬í•©ë‹ˆë‹¤.',
        characteristics: ['ëª©í‘œ ì§€í–¥ì ', 'ê²½ìŸ ì˜ì‹', 'ì„±ì·¨ìš•', 'ë„ì „ ì •ì‹ '],
        color: '#3b82f6',
        gradient: 'from-blue-500 to-indigo-500'
    }
};

// íŒ¨í„´ë³„ ìƒì„¸ ì½˜í…ì¸  (HOOK, INSIGHT, DEEP-DIVE, ACTION)
const patternContents = {
    'íŒ”ë‘ê·€': {
        hook: "ë‹¹ì‹ ì€ 'ê´€ê³„ì˜ í˜'ìœ¼ë¡œ ë¶€ë¥¼ ë§Œë“œëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. í˜¼ìì„œëŠ” ì‘ì€ ì¼ë„ ì–´ë µì§€ë§Œ, í•¨ê»˜í•˜ë©´ í° ê¿ˆë„ ì´ë£° ìˆ˜ ìˆì£ .",
        insight: {
            title: "ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ë¨¸ë‹ˆ DNA",
            points: [
                "ğŸ¤ **ì‚¬íšŒì  ë„¤íŠ¸ì›Œí¬ê°€ ê³§ ì¬ì •ì  ìì‚°**: ë‹¹ì‹ ì˜ ì¸ë§¥ê³¼ ê´€ê³„ëŠ” íˆ¬ì ê¸°íšŒì˜ ë³´ê³ ì…ë‹ˆë‹¤",
                "ğŸ‘¥ **ì§‘ë‹¨ ì§€ì„±ì˜ í™œìš©ì**: ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ê²½í—˜ê³¼ ì§€í˜œë¥¼ ì˜ í¡ìˆ˜í•˜ê³  í™œìš©í•©ë‹ˆë‹¤", 
                "ğŸ’¡ **í˜‘ì—…ì„ í†µí•œ ì‹œë„ˆì§€**: í˜¼ì í•˜ëŠ” ê²ƒë³´ë‹¤ í•¨ê»˜ í•  ë•Œ ë” í° ì„±ê³¼ë¥¼ ëƒ…ë‹ˆë‹¤",
                "ğŸ”„ **ì ì‘ë ¥ì´ ë›°ì–´ë‚¨**: ì‹œì¥ ë³€í™”ë‚˜ íŠ¸ë Œë“œì— ë¹ ë¥´ê²Œ ì ì‘í•˜ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤"
            ]
        },
        deepDive: {
            title: "ì‹¬ì¸µ ë¶„ì„: ì™œ ë‹¹ì‹ ì€ íŒ”ë‘ê·€í˜•ì¼ê¹Œ?",
            content: [
                {
                    subtitle: "ğŸ§  ì‹¬ë¦¬ì  íŠ¹ì„±",
                    description: "ë‹¹ì‹ ì€ íƒ€ì¸ê³¼ì˜ ì—°ê²°ì„ í†µí•´ ì•ˆì •ê°ì„ ì–»ëŠ” ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœí•œ ì˜ì¡´ì´ ì•„ë‹ˆë¼, ì§‘ë‹¨ì˜ í˜ì„ ë¯¿ê³  í™œìš©í•˜ëŠ” ì§€í˜œì…ë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ’° ë¨¸ë‹ˆ íŒ¨í„´ì˜ ë¿Œë¦¬",
                    description: "ì–´ë¦° ì‹œì ˆë¶€í„° 'í•¨ê»˜'ì˜ ê°€ì¹˜ë¥¼ ì¤‘ìš”í•˜ê²Œ ì—¬ê²¼ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í•˜ëŠ” ê²½ì œí™œë™ì—ì„œ ì¦ê±°ì›€ê³¼ ì„±ì·¨ê°ì„ ëŠê¼ˆì£ ."
                },
                {
                    subtitle: "ğŸ¯ íˆ¬ì ì„±í–¥ ë¶„ì„",
                    description: "ë¦¬ìŠ¤í¬ë¥¼ ë¶„ì‚°í•˜ê³  ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ê²€ì¦ì„ ë°›ì€ íˆ¬ìë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤. ì´ëŠ” ë§¤ìš° í˜„ëª…í•œ ì ‘ê·¼ë²•ì´ë©°, í° ì†ì‹¤ì„ í”¼í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤."
                },
                {
                    subtitle: "âš ï¸ ì£¼ì˜í•´ì•¼ í•  í•¨ì •",
                    description: "ë•Œë¡œëŠ” ë„ˆë¬´ ë§ì€ ì˜ê²¬ì„ ìˆ˜ì§‘í•˜ë‹¤ê°€ ê²°ì •ì„ ë‚´ë¦¬ì§€ ëª»í•˜ê±°ë‚˜, ì˜ëª»ëœ ì •ë³´ì— íœ©ì“¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ë³´ì˜ ì§ˆì„ íŒë‹¨í•˜ëŠ” ê¸°ì¤€ì„ ì„¸ìš°ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
                }
            ]
        },
        action: {
            title: "ë‹¹ì‹ ì„ ìœ„í•œ ë§ì¶¤ ì‹¤í–‰ ê³„íš",
            phases: [
                {
                    phase: "1ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• (1-3ê°œì›”)",
                    items: [
                        "íˆ¬ì ìŠ¤í„°ë”” ê·¸ë£¹ì´ë‚˜ ì¬í…Œí¬ ëª¨ì„ì— ì°¸ì—¬í•˜ê¸°",
                        "ì‹ ë¢°í•  ë§Œí•œ ê¸ˆìœµ ì „ë¬¸ê°€ë‚˜ ë©˜í†  ì°¾ê¸°", 
                        "ê°€ì¡±, ì¹œêµ¬ë“¤ê³¼ ì¬ì • ëª©í‘œ ê³µìœ í•˜ê³  ì‘ì›ë°›ê¸°",
                        "ì˜¨ë¼ì¸ íˆ¬ì ì»¤ë®¤ë‹ˆí‹°ì—ì„œ í™œë°œíˆ í™œë™í•˜ê¸°"
                    ]
                },
                {
                    phase: "2ë‹¨ê³„: ì²´ê³„ì  í•™ìŠµ (3-6ê°œì›”)",
                    items: [
                        "ë™ë£Œë“¤ê³¼ í•¨ê»˜ íˆ¬ì êµìœ¡ í”„ë¡œê·¸ë¨ ìˆ˜ê°•í•˜ê¸°",
                        "íˆ¬ì ì„±ê³µ ì‚¬ë¡€ë“¤ì„ ë¶„ì„í•˜ê³  ê³µìœ í•˜ê¸°",
                        "ì†Œì•¡ìœ¼ë¡œ ì‹œì‘í•˜ì—¬ ê²½í—˜ ìŒ“ê¸°",
                        "ì •ê¸°ì ì¸ íˆ¬ì íšŒì˜ë‚˜ ì ê²€ ëª¨ì„ ë§Œë“¤ê¸°"
                    ]
                },
                {
                    phase: "3ë‹¨ê³„: ì‹¤ì „ ì ìš© (6ê°œì›”-1ë…„)",
                    items: [
                        "ê²€ì¦ëœ íˆ¬ì ìƒí’ˆë¶€í„° ì‹œì‘í•˜ê¸°",
                        "í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë™ë£Œë“¤ê³¼ í•¨ê»˜ ê²€í† í•˜ê¸°",
                        "íˆ¬ì ì„±ê³¼ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ê³µìœ í•˜ê³  í”¼ë“œë°± ë°›ê¸°",
                        "ìƒˆë¡œìš´ íˆ¬ì ê¸°íšŒë¥¼ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë°œêµ´í•˜ê¸°"
                    ]
                }
            ],
            tips: [
                "ğŸ’¡ **ì •ë³´ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°**: íˆ¬ì ì •ë³´ì˜ ì¶œì²˜, ê²€ì¦ ì—¬ë¶€, ë‹¤ìˆ˜ ì˜ê²¬ ë“±ì„ ì²´í¬",
                "ğŸ¤ **íˆ¬ì íŒŒíŠ¸ë„ˆì‹­ ê³ ë ¤**: ì‹ ë¢°í•  ë§Œí•œ ì‚¬ëŒê³¼ í•¨ê»˜ íˆ¬ìí•˜ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•",
                "ğŸ“š **ì§€ì†ì ì¸ í•™ìŠµ**: ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì„±ê³µ/ì‹¤íŒ¨ ì‚¬ë¡€ë¥¼ í†µí•´ ê³„ì† ë°°ìš°ê¸°",
                "âš–ï¸ **ê· í˜• ì¡ê¸°**: íƒ€ì¸ì˜ ì˜ê²¬ê³¼ ë³¸ì¸ì˜ íŒë‹¨ ì‚¬ì´ì—ì„œ ì ì ˆí•œ ê· í˜•ì  ì°¾ê¸°"
            ]
        }
    },
    'ì§ˆëŸ¬': {
        hook: "ë‹¹ì‹ ì€ 'ìˆœê°„ì˜ í˜'ìœ¼ë¡œ ê¸°íšŒë¥¼ ì¡ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ë‚¨ë“¤ì´ ë§ì„¤ì¼ ë•Œ ë‹¹ì‹ ì€ ì‹¤í–‰í•˜ê³ , ê·¸ ê³¼ê°í•¨ì´ ê³§ ë‹¹ì‹ ì˜ ë¬´ê¸°ì£ .",
        insight: {
            title: "ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ë¨¸ë‹ˆ DNA", 
            points: [
                "âš¡ **ë¹ ë¥¸ ì‹¤í–‰ë ¥**: ê¸°íšŒë¥¼ í¬ì°©í•˜ë©´ ì¦‰ì‹œ í–‰ë™ìœ¼ë¡œ ì˜®ê¸°ëŠ” ì¶”ì§„ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤",
                "ğŸ¯ **ì§ê°ì  íŒë‹¨ë ¥**: ë³µì¡í•œ ë¶„ì„ë³´ë‹¤ ì§ê´€ì„ í†µí•´ ì¢‹ì€ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ëŠ¥ë ¥",
                "ğŸ’ª **ìœ„í—˜ ê°ìˆ˜ ëŠ¥ë ¥**: ë³€í™”ì™€ ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ìš©ê¸°ê°€ ìˆìŠµë‹ˆë‹¤",
                "ğŸŒŸ **í˜„ì¬ ê°€ì¹˜ ê·¹ëŒ€í™”**: ì§€ê¸ˆ ì´ ìˆœê°„ì˜ ë§Œì¡±ê³¼ ê²½í—˜ì„ ì¤‘ì‹œí•˜ëŠ” ì² í•™"
            ]
        },
        deepDive: {
            title: "ì‹¬ì¸µ ë¶„ì„: ì™œ ë‹¹ì‹ ì€ ì§ˆëŸ¬í˜•ì¼ê¹Œ?",
            content: [
                {
                    subtitle: "ğŸ§  ì‹¬ë¦¬ì  íŠ¹ì„±", 
                    description: "ë‹¹ì‹ ì€ ë¯¸ë˜ì˜ ë¶ˆí™•ì‹¤ì„±ë³´ë‹¤ í˜„ì¬ì˜ í™•ì‹¤í•œ ì¦ê±°ì›€ì„ ì„ íƒí•˜ëŠ” ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤. ì´ëŠ” ì‚¶ì„ ì ê·¹ì ìœ¼ë¡œ ì‚´ì•„ê°€ë ¤ëŠ” ê¸ì •ì  ì—ë„ˆì§€ì˜ í‘œí˜„ì…ë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ’° ë¨¸ë‹ˆ íŒ¨í„´ì˜ ë¿Œë¦¬",
                    description: "ì–´ë¦´ ë•Œë¶€í„° 'ì§€ê¸ˆ ë‹¹ì¥'ì˜ ê°€ì¹˜ë¥¼ ì¤‘ìš”í•˜ê²Œ ì—¬ê²¼ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ë¯¸ë˜ë¥¼ ìœ„í•´ í˜„ì¬ë¥¼ í¬ìƒí•˜ëŠ” ê²ƒë³´ë‹¤, í˜„ì¬ì˜ í–‰ë³µì„ ìš°ì„ ì‹œí•˜ëŠ” ì² í•™ì„ ê°€ì§€ê³  ìˆì£ ."
                },
                {
                    subtitle: "ğŸ¯ íˆ¬ì ì„±í–¥ ë¶„ì„", 
                    description: "ë¹ ë¥¸ ìˆ˜ìµì„ ë‚¼ ìˆ˜ ìˆëŠ” íˆ¬ìë¥¼ ì„ í˜¸í•˜ë©°, íŠ¸ë Œë“œì— ë¯¼ê°í•©ë‹ˆë‹¤. ì´ëŠ” ì‹œì¥ì˜ ê¸°íšŒë¥¼ ë¹ ë¥´ê²Œ í¬ì°©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì§€ë§Œ, ë•Œë¡œëŠ” ì¶©ë™ì  ê²°ì •ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "âš ï¸ ì£¼ì˜í•´ì•¼ í•  í•¨ì •",
                    description: "ì¦‰ì„ì—ì„œ ë‚´ë¦° ê²°ì •ì´ ë•Œë¡œëŠ” í° ì†ì‹¤ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì •ì´ ì•„ë‹Œ ë…¼ë¦¬ë¡œ íˆ¬ìí•˜ëŠ” ìŠµê´€ì„ ê¸°ë¥´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
                }
            ]
        },
        action: {
            title: "ë‹¹ì‹ ì„ ìœ„í•œ ë§ì¶¤ ì‹¤í–‰ ê³„íš",
            phases: [
                {
                    phase: "1ë‹¨ê³„: ì¶©ë™ ì œì–´ ì‹œìŠ¤í…œ êµ¬ì¶• (1-2ê°œì›”)",
                    items: [
                        "íˆ¬ì ì „ 24ì‹œê°„ ì¿¨ë‹¤ìš´ íƒ€ì„ ê·œì¹™ ì •í•˜ê¸°",
                        "íˆ¬ì í•œë„ì•¡ì„ ë¯¸ë¦¬ ì •í•´ë‘ê³  ì ˆëŒ€ ì´ˆê³¼í•˜ì§€ ì•Šê¸°",
                        "ê°ì • ìƒíƒœë¥¼ ê¸°ë¡í•˜ëŠ” íˆ¬ì ì¼ê¸° ì‘ì„±í•˜ê¸°",
                        "ìë™ ì ê¸ˆì„ í†µí•´ ê°•ì œ ì €ì¶• ì‹œìŠ¤í…œ ë§Œë“¤ê¸°"
                    ]
                },
                {
                    phase: "2ë‹¨ê³„: ì²´ê³„ì  íˆ¬ì ì‹œì‘ (2-6ê°œì›”)",
                    items: [
                        "ì†Œì•¡ ë¶„ì‚° íˆ¬ìë¡œ ì‹œì‘í•˜ì—¬ ê²½í—˜ ìŒ“ê¸°", 
                        "ì›” ë‹¨ìœ„ íˆ¬ì ê³„íš ì„¸ìš°ê³  ì§€í‚¤ê¸°",
                        "íˆ¬ì ê²°ê³¼ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ë°˜ì„±í•˜ê¸°",
                        "ì„±ê³µí•œ íˆ¬ììë“¤ì˜ ì‚¬ë¡€ ì—°êµ¬í•˜ê¸°"
                    ]
                },
                {
                    phase: "3ë‹¨ê³„: ê· í˜•ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„± (6ê°œì›”-1ë…„)",
                    items: [
                        "ì¥ê¸° íˆ¬ìì™€ ë‹¨ê¸° íˆ¬ìì˜ ë¹„ìœ¨ ì •í•˜ê¸°",
                        "ì•ˆì •ì ì¸ ìì‚°ê³¼ ì„±ì¥ ìì‚°ì˜ ê· í˜• ë§ì¶”ê¸°",
                        "ì •ê¸°ì ì¸ í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹±í•˜ê¸°",
                        "íˆ¬ì ëª©í‘œì™€ ì„±ê³¼ë¥¼ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•˜ê¸°"
                    ]
                }
            ],
            tips: [
                "ğŸ›‘ **ìŠ¤íƒ‘ë¡œìŠ¤ ì„¤ì •**: ì†ì‹¤ í•œê³„ì„ ì„ ë¯¸ë¦¬ ì •í•´ë‘ê³  ì§€í‚¤ê¸°",
                "ğŸ“± **íˆ¬ì ì•± í™œìš©**: ìë™ íˆ¬ì ê¸°ëŠ¥ì„ í™œìš©í•´ ê°ì •ì  ê²°ì • ì¤„ì´ê¸°", 
                "ğŸ¯ **ì‘ì€ ëª©í‘œë¶€í„°**: í° ëª©í‘œë³´ë‹¤ëŠ” ì‘ê³  ë‹¬ì„± ê°€ëŠ¥í•œ ëª©í‘œë¶€í„° ì‹œì‘",
                "ğŸ¤ **ë©˜í†  ì°¾ê¸°**: ê²½í—˜ ë§ì€ íˆ¬ììì˜ ì¡°ì–¸ì„ ì •ê¸°ì ìœ¼ë¡œ ë°›ê¸°"
            ]
        }
    },
    'ì™„ë²½': {
        hook: "ë‹¹ì‹ ì€ 'ì™„ë²½í•œ ê³„íš'ìœ¼ë¡œ ë¶€ë¥¼ ìŒ“ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. í•œ ë²ˆì˜ ì‹¤ìˆ˜ë„ ìš©ë‚©í•˜ì§€ ì•ŠëŠ” ì‹ ì¤‘í•¨ì´ ê³§ ë‹¹ì‹ ë§Œì˜ ê²½ìŸë ¥ì´ì£ .",
        insight: {
            title: "ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ë¨¸ë‹ˆ DNA",
            points: [
                "ğŸ¯ **ì™„ë²½ì£¼ì˜ì  ì ‘ê·¼**: ëª¨ë“  ê²ƒì„ ì² ì €íˆ ë¶„ì„í•˜ê³  ê³„íší•˜ëŠ” ì²´ê³„ì  ì‚¬ê³ ë ¥",
                "ğŸ›¡ï¸ **ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì „ë¬¸ê°€**: ìœ„í—˜ì„ ë¯¸ë¦¬ ì˜ˆì¸¡í•˜ê³  ëŒ€ë¹„í•˜ëŠ” ë›°ì–´ë‚œ ëŠ¥ë ¥",
                "ğŸ“Š **ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •**: ê°ì •ë³´ë‹¤ëŠ” ê°ê´€ì  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ íŒë‹¨",
                "ğŸ—ï¸ **ì¥ê¸°ì  ê´€ì **: ë‹¹ì¥ì˜ ìˆ˜ìµë³´ë‹¤ ì¥ê¸°ì  ì•ˆì •ì„±ì„ ì¶”êµ¬í•˜ëŠ” ì§€í˜œ"
            ]
        },
        deepDive: {
            title: "ì‹¬ì¸µ ë¶„ì„: ì™œ ë‹¹ì‹ ì€ ì™„ë²½í˜•ì¼ê¹Œ?",
            content: [
                {
                    subtitle: "ğŸ§  ì‹¬ë¦¬ì  íŠ¹ì„±",
                    description: "ë‹¹ì‹ ì€ ë¶ˆí™•ì‹¤ì„±ì„ ìµœì†Œí™”í•˜ë ¤ëŠ” ê°•í•œ ìš•êµ¬ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì•ˆì „ì— ëŒ€í•œ ë†’ì€ ê°€ì¹˜ê´€ê³¼ ì±…ì„ê°ì—ì„œ ë¹„ë¡¯ëœ ê²ƒìœ¼ë¡œ, ë§¤ìš° ê±´ì „í•œ íˆ¬ì ì² í•™ì˜ ê¸°ë°˜ì…ë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ’° ë¨¸ë‹ˆ íŒ¨í„´ì˜ ë¿Œë¦¬", 
                    description: "ì–´ë¦´ ë•Œë¶€í„° 'ì‹¤ìˆ˜í•˜ì§€ ì•Šê¸°'ì˜ ì¤‘ìš”ì„±ì„ ë°°ì› ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì´ëŠ” ì‹ ì¤‘í•˜ê³  ì•ˆì •ì ì¸ ì¬ì • ê´€ë¦¬ ëŠ¥ë ¥ìœ¼ë¡œ ë°œì „í–ˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ¯ íˆ¬ì ì„±í–¥ ë¶„ì„",
                    description: "ì² ì €í•œ ë¶„ì„ì„ í†µí•´ íˆ¬ì ê²°ì •ì„ ë‚´ë¦¬ë©°, ì•ˆì •ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤. ì´ëŠ” í° ì†ì‹¤ì„ ë°©ì§€í•˜ëŠ” ê°•ì ì´ì§€ë§Œ, ë•Œë¡œëŠ” ê¸°íšŒë¥¼ ë†“ì¹  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "âš ï¸ ì£¼ì˜í•´ì•¼ í•  í•¨ì •", 
                    description: "ê³¼ë„í•œ ì‹ ì¤‘í•¨ìœ¼ë¡œ ì¸í•´ íˆ¬ì ì‹œì ì„ ë†“ì¹˜ê±°ë‚˜, ì™„ë²½í•œ ì¡°ê±´ë§Œ ê¸°ë‹¤ë¦¬ë‹¤ê°€ ê¸°íšŒë¥¼ ìƒì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì ˆí•œ ì‹œì ì—ì„œì˜ ê²°ë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤."
                }
            ]
        },
        action: {
            title: "ë‹¹ì‹ ì„ ìœ„í•œ ë§ì¶¤ ì‹¤í–‰ ê³„íš", 
            phases: [
                {
                    phase: "1ë‹¨ê³„: íˆ¬ì ê¸°ì¤€ ëª…í™•í™” (1-2ê°œì›”)",
                    items: [
                        "ê°œì¸ íˆ¬ì ì›ì¹™ê³¼ ê¸°ì¤€ì  ëª…í™•íˆ ì„¤ì •í•˜ê¸°",
                        "ë¦¬ìŠ¤í¬ í—ˆìš© ìˆ˜ì¤€ê³¼ íˆ¬ì ëª©í‘œ êµ¬ì²´í™”í•˜ê¸°",
                        "íˆ¬ì ì²´í¬ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ì–´ í™œìš©í•˜ê¸°", 
                        "ì†Œì•¡ìœ¼ë¡œ ë‹¤ì–‘í•œ íˆ¬ì ìƒí’ˆ ê²½í—˜í•´ë³´ê¸°"
                    ]
                },
                {
                    phase: "2ë‹¨ê³„: ì ì§„ì  ìœ„í—˜ìì‚° í™•ëŒ€ (3-6ê°œì›”)",
                    items: [
                        "ì•ˆì • ìì‚° 70%, ì„±ì¥ ìì‚° 30%ë¡œ ì‹œì‘í•˜ê¸°",
                        "ì›”ë³„ íˆ¬ì ì„±ê³¼ ì •ê¸° ê²€í† í•˜ê¸°",
                        "ì‹œì¥ ìƒí™© ë¶„ì„ ëŠ¥ë ¥ ê¸°ë¥´ê¸°",
                        "ì „ë¬¸ê°€ ìƒë‹´ì„ í†µí•œ í¬íŠ¸í´ë¦¬ì˜¤ ì ê²€ë°›ê¸°"
                    ]
                },
                {
                    phase: "3ë‹¨ê³„: ê· í˜•ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„± (6ê°œì›”-1ë…„)",
                    items: [
                        "êµ­ë‚´ì™¸ ë¶„ì‚° íˆ¬ìë¡œ ë¦¬ìŠ¤í¬ ë¶„ì‚°í•˜ê¸°",
                        "ì •ê¸°ì ì¸ ë¦¬ë°¸ëŸ°ì‹±ìœ¼ë¡œ í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬",
                        "ê²½ì œ ì§€í‘œì™€ ì‹œì¥ íŠ¸ë Œë“œ ë¶„ì„ í•™ìŠµ",
                        "ì¥ê¸° íˆ¬ì ì„±ê³¼ ì¶”ì  ì‹œìŠ¤í…œ êµ¬ì¶•"
                    ]
                }
            ],
            tips: [
                "ğŸ“ˆ **ì ì§„ì  í™•ëŒ€**: ìœ„í—˜ìì‚° ë¹„ì¤‘ì„ ì ì§„ì ìœ¼ë¡œ ëŠ˜ë ¤ê°€ê¸°",
                "â° **íƒ€ì´ë°ë³´ë‹¤ íƒ€ì„**: ì™„ë²½í•œ íƒ€ì´ë°ë³´ë‹¤ëŠ” ê¾¸ì¤€í•œ íˆ¬ìê°€ ì¤‘ìš”",
                "ğŸ“ **ì§€ì†ì  í•™ìŠµ**: íˆ¬ì êµìœ¡ê³¼ ì‹œì¥ ë¶„ì„ ëŠ¥ë ¥ í–¥ìƒì— ì§€ì† íˆ¬ì",
                "ğŸ¤ **ì „ë¬¸ê°€ í™œìš©**: ì •ê¸°ì ì¸ ì „ë¬¸ê°€ ìƒë‹´ìœ¼ë¡œ ê°ê´€ì  ì‹œê° ìœ ì§€"
            ]
        }
    },
    'ë‚˜ì˜ë‚˜': {
        hook: "ë‹¹ì‹ ì€ 'ìì‹ ë§Œì˜ ìŠ¤íƒ€ì¼'ë¡œ ë¶€ë¥¼ ë§Œë“œëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ë‚¨ë“¤ê³¼ëŠ” ë‹¤ë¥¸ ë…íŠ¹í•¨ê³¼ ê°œì„±ì´ ê³§ ë‹¹ì‹ ë§Œì˜ íˆ¬ì ì² í•™ì´ì£ .",
        insight: {
            title: "ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ë¨¸ë‹ˆ DNA",
            points: [
                "âœ¨ **ê°œì„± ì¤‘ì‹œ**: ë‚¨ë“¤ê³¼ ë‹¤ë¥¸ ìì‹ ë§Œì˜ íˆ¬ì ìŠ¤íƒ€ì¼ê³¼ ì² í•™ì„ ì¶”êµ¬í•©ë‹ˆë‹¤",
                "ğŸ† **ì„±ê³µ ì§€í–¥**: ë‹¨ìˆœí•œ ìˆ˜ìµì„ ë„˜ì–´ì„œ ì„±ê³µì˜ ìƒì§•ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤",
                "ğŸ’ **ê°€ì¹˜ íˆ¬ì**: ë¸Œëœë“œì™€ ê°€ì¹˜ê°€ ìˆëŠ” ê²ƒì— íˆ¬ìí•˜ëŠ” ì•ˆëª©ì´ ìˆìŠµë‹ˆë‹¤",
                "ğŸŒŸ **ìì‹ ê°**: ìì‹ ì˜ íŒë‹¨ê³¼ ì„ íƒì— ëŒ€í•œ ê°•í•œ í™•ì‹ ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤"
            ]
        },
        deepDive: {
            title: "ì‹¬ì¸µ ë¶„ì„: ì™œ ë‹¹ì‹ ì€ ë‚˜ì˜ë‚˜í˜•ì¼ê¹Œ?",
            content: [
                {
                    subtitle: "ğŸ§  ì‹¬ë¦¬ì  íŠ¹ì„±",
                    description: "ë‹¹ì‹ ì€ ìê¸° ì •ì²´ì„±ê³¼ ì‚¬íšŒì  ì§€ìœ„ë¥¼ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ëŠ” ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤. ì´ëŠ” ë†’ì€ ìì¡´ê°ê³¼ ì„±ì·¨ ìš•êµ¬ì—ì„œ ë¹„ë¡¯ë˜ë©°, íˆ¬ìì—ì„œë„ 'ë©‹ì§„' ì„ íƒì„ í•˜ë ¤ëŠ” ë™ê¸°ë¡œ ì‘ìš©í•©ë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ’° ë¨¸ë‹ˆ íŒ¨í„´ì˜ ë¿Œë¦¬",
                    description: "ì–´ë¦´ ë•Œë¶€í„° 'íŠ¹ë³„í•¨'ì— ê°€ì¹˜ë¥¼ ë‘ê³  ìëì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ë‚¨ë“¤ë³´ë‹¤ ë” ì¢‹ì€ ê²ƒ, ë” ë©‹ì§„ ê²ƒì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥ì´ íˆ¬ì ì² í•™ì—ë„ ë°˜ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ¯ íˆ¬ì ì„±í–¥ ë¶„ì„", 
                    description: "ìœ ëª…í•˜ê±°ë‚˜ íŠ¸ë Œë””í•œ íˆ¬ì ìƒí’ˆì„ ì„ í˜¸í•˜ë©°, ë¸Œëœë“œ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤. ì´ëŠ” ì¢‹ì€ íˆ¬ì ê¸°íšŒë¥¼ í¬ì°©í•˜ëŠ” ë° ë„ì›€ì´ ë˜ì§€ë§Œ, ë•Œë¡œëŠ” ê³¼ë„í•œ í”„ë¦¬ë¯¸ì—„ì„ ì§€ë¶ˆí•  ìœ„í—˜ë„ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "âš ï¸ ì£¼ì˜í•´ì•¼ í•  í•¨ì •",
                    description: "ì™¸ì ì¸ ë©‹ë³´ë‹¤ëŠ” ì‹¤ì œ ìˆ˜ìµì„±ì„ ìš°ì„  ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ë¸Œëœë“œë‚˜ ì´ë¯¸ì§€ì—ë§Œ ì˜ì¡´í•˜ì§€ ë§ê³ , ì‹¤ì§ˆì ì¸ ê°€ì¹˜ë¥¼ íŒë‹¨í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¥´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
                }
            ]
        },
        action: {
            title: "ë‹¹ì‹ ì„ ìœ„í•œ ë§ì¶¤ ì‹¤í–‰ ê³„íš",
            phases: [
                {
                    phase: "1ë‹¨ê³„: ê°€ì¹˜ íˆ¬ì ê¸°ì¤€ ì •ë¦½ (1-3ê°œì›”)", 
                    items: [
                        "ë¸Œëœë“œ ê°€ì¹˜ì™€ ì‹¤ì œ íˆ¬ì ê°€ì¹˜ êµ¬ë¶„í•˜ëŠ” ê¸°ì¤€ ì„¸ìš°ê¸°",
                        "ì„±ê³µí•œ ê°€ì¹˜ íˆ¬ììë“¤ì˜ ì² í•™ ì—°êµ¬í•˜ê¸°",
                        "ê°œì¸ íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ì˜ 'ì‹œê·¸ë‹ˆì²˜' ë§Œë“¤ê¸°",
                        "íˆ¬ì ì„±ê³¼ ì¸¡ì • ì§€í‘œ ì„¤ì •í•˜ê¸°"
                    ]
                },
                {
                    phase: "2ë‹¨ê³„: í”„ë¦¬ë¯¸ì—„ ìì‚° íˆ¬ì (3-9ê°œì›”)",
                    items: [
                        "ìš°ëŸ‰ ê¸°ì—… ì£¼ì‹ì´ë‚˜ í”„ë¦¬ë¯¸ì—„ í€ë“œ íˆ¬ì ì‹œì‘",
                        "ESG, í…Œë§ˆë³„ íˆ¬ìë¡œ ê°œì„± ìˆëŠ” í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±",
                        "í•´ì™¸ ìœ ëª… ê¸°ì—…ì´ë‚˜ ETF íˆ¬ì ê³ ë ¤", 
                        "íˆ¬ì ì„±ê³¼ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìë‘í•˜ê¸°"
                    ]
                },
                {
                    phase: "3ë‹¨ê³„: íˆ¬ì ì „ë¬¸ê°€ë¡œ ì„±ì¥ (9ê°œì›”-2ë…„)",
                    items: [
                        "íˆ¬ì ë¸”ë¡œê·¸ë‚˜ SNSë¡œ íˆ¬ì ì² í•™ ê³µìœ í•˜ê¸°",
                        "íˆ¬ì ìŠ¤í„°ë””ë‚˜ ëª¨ì„ì—ì„œ ë¦¬ë” ì—­í•  í•˜ê¸°",
                        "ìƒˆë¡œìš´ íˆ¬ì íŠ¸ë Œë“œ ë°œêµ´í•˜ê³  ì„ ë„í•˜ê¸°", 
                        "ê°œì¸ ë¸Œëœë“œë¥¼ í™œìš©í•œ íˆ¬ì ê¸°íšŒ ì°½ì¶œ"
                    ]
                }
            ],
            tips: [
                "ğŸ’¼ **ê°œì¸ ë¸Œëœë”©**: íˆ¬ììë¡œì„œì˜ ê°œì¸ ë¸Œëœë“œ êµ¬ì¶•í•˜ê¸°",
                "ğŸ“Š **ì„±ê³¼ ê³µìœ **: íˆ¬ì ì„±ê³¼ë¥¼ ë©‹ì§€ê²Œ ì‹œê°í™”í•˜ì—¬ ê³µìœ í•˜ê¸°",
                "ğŸ¯ **ì°¨ë³„í™”**: ë‚¨ë“¤ê³¼ ë‹¤ë¥¸ ë…íŠ¹í•œ íˆ¬ì í¬ì¸íŠ¸ ì°¾ê¸°", 
                "ğŸ† **ëª©í‘œ ì„¤ì •**: êµ¬ì²´ì ì´ê³  ë„ì „ì ì¸ íˆ¬ì ëª©í‘œ ì„¸ìš°ê¸°"
            ]
        }
    },
    'ìŸì·¨': {
        hook: "ë‹¹ì‹ ì€ 'ìŠ¹ë¶€ì‚¬ ì •ì‹ 'ìœ¼ë¡œ ë¶€ë¥¼ ìŸì·¨í•˜ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ê²½ìŸì—ì„œ ì´ê¸°ëŠ” ê²ƒ, ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ê²ƒì´ ê³§ ë‹¹ì‹ ì˜ ì›ë™ë ¥ì´ì£ .",
        insight: {
            title: "ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ë¨¸ë‹ˆ DNA",
            points: [
                "ğŸ† **ê°•ë ¥í•œ ì„±ì·¨ ìš•êµ¬**: ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ë°˜ë“œì‹œ ë‹¬ì„±í•˜ë ¤ëŠ” ì˜ì§€ê°€ ê°•í•©ë‹ˆë‹¤",
                "âš”ï¸ **ê²½ìŸ ìš°ìœ„ ì¶”êµ¬**: ë‚¨ë“¤ë³´ë‹¤ ë” ë‚˜ì€ ìˆ˜ìµì„ ë‚´ë ¤ëŠ” ê²½ìŸ ì •ì‹ ì´ ë›°ì–´ë‚©ë‹ˆë‹¤", 
                "ğŸ¯ **ëª©í‘œ ì§€í–¥ì **: ëª…í™•í•œ ëª©í‘œë¥¼ ì„¸ìš°ê³  ì²´ê³„ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ëŠ¥ë ¥",
                "ğŸ’ª **ë„ì „ ì •ì‹ **: ì–´ë ¤ìš´ ìƒí™©ì—ì„œë„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ê°•ì¸í•œ ì •ì‹ ë ¥"
            ]
        },
        deepDive: {
            title: "ì‹¬ì¸µ ë¶„ì„: ì™œ ë‹¹ì‹ ì€ ìŸì·¨í˜•ì¼ê¹Œ?",
            content: [
                {
                    subtitle: "ğŸ§  ì‹¬ë¦¬ì  íŠ¹ì„±",
                    description: "ë‹¹ì‹ ì€ ì„±ê³µê³¼ ì„±ì·¨ì— ëŒ€í•œ ê°•í•œ ìš•êµ¬ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë†’ì€ ìê¸°íš¨ëŠ¥ê°ê³¼ ê²½ìŸì‹¬ì—ì„œ ë¹„ë¡¯ë˜ë©°, íˆ¬ìì—ì„œë„ 'ì´ê¸°ëŠ”' ê²ƒì— ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ’° ë¨¸ë‹ˆ íŒ¨í„´ì˜ ë¿Œë¦¬",
                    description: "ì–´ë¦´ ë•Œë¶€í„° '1ë“±'ì´ë‚˜ 'ì„±ì·¨'ì— ëŒ€í•œ ë³´ìƒì„ ë°›ìœ¼ë©° ìëì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ê²½ìŸì—ì„œ ì´ê¸°ëŠ” ê²ƒì´ ìì‹ ì˜ ê°€ì¹˜ë¥¼ ì¦ëª…í•˜ëŠ” ë°©ë²•ì´ë¼ê³  ì—¬ê¸°ëŠ” ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "ğŸ¯ íˆ¬ì ì„±í–¥ ë¶„ì„",
                    description: "ë†’ì€ ìˆ˜ìµë¥ ì„ ì¶”êµ¬í•˜ë©°, ì‹œì¥ì„ ì´ê¸°ë ¤ëŠ” ì ê·¹ì ì¸ íˆ¬ìë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤. ì´ëŠ” í° ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆê²Œ í•´ì£¼ì§€ë§Œ, ê³¼ë„í•œ ìœ„í—˜ì„ ê°ìˆ˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤."
                },
                {
                    subtitle: "âš ï¸ ì£¼ì˜í•´ì•¼ í•  í•¨ì •", 
                    description: "ë‹¨ê¸°ì  ì„±ê³¼ì— ì§‘ì°©í•˜ê±°ë‚˜ ê³¼ë„í•œ ìœ„í—˜ì„ ê°ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì •ì  íˆ¬ìë³´ë‹¤ëŠ” ì „ëµì  ì ‘ê·¼ì´ í•„ìš”í•˜ë©°, ì¥ê¸°ì  ê´€ì ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
                }
            ]
        },
        action: {
            title: "ë‹¹ì‹ ì„ ìœ„í•œ ë§ì¶¤ ì‹¤í–‰ ê³„íš",
            phases: [
                {
                    phase: "1ë‹¨ê³„: ì „ëµì  ê¸°ë°˜ êµ¬ì¶• (1-3ê°œì›”)",
                    items: [
                        "êµ¬ì²´ì ì´ê³  ë„ì „ì ì¸ íˆ¬ì ëª©í‘œ ì„¤ì •í•˜ê¸°",
                        "ìœ„í—˜ ê´€ë¦¬ ì›ì¹™ê³¼ ì†ì‹¤ í•œê³„ì„  ì •í•˜ê¸°",
                        "íˆ¬ì ì„±ê³¼ ì¶”ì  ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°",
                        "ì‹œì¥ ë¶„ì„ê³¼ íˆ¬ì ì „ëµ í•™ìŠµí•˜ê¸°"
                    ]
                },
                {
                    phase: "2ë‹¨ê³„: ì ê·¹ì  íˆ¬ì ì‹¤í–‰ (3-9ê°œì›”)",
                    items: [
                        "ì„±ì¥ì£¼ ì¤‘ì‹¬ì˜ ê³µê²©ì  í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±", 
                        "ì‹œì¥ íƒ€ì´ë°ì„ í™œìš©í•œ íˆ¬ì ê¸°ë²• ì—°ìŠµ",
                        "í•´ì™¸ ì‹œì¥ì´ë‚˜ ìƒˆë¡œìš´ íˆ¬ì ìƒí’ˆ ë„ì „",
                        "íˆ¬ì ì„±ê³¼ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ê°œì„ "
                    ]
                },
                {
                    phase: "3ë‹¨ê³„: íˆ¬ì ì „ë¬¸ì„± ê·¹ëŒ€í™” (9ê°œì›”-2ë…„)",
                    items: [
                        "íŒŒìƒìƒí’ˆì´ë‚˜ ê³ ê¸‰ íˆ¬ì ê¸°ë²• í•™ìŠµ",
                        "ê°œì¸ íˆ¬ì ì „ëµ ê°œë°œí•˜ê³  ë°±í…ŒìŠ¤íŒ…",
                        "íˆ¬ì ê´€ë ¨ ìê²©ì¦ ì·¨ë“ì´ë‚˜ ì „ë¬¸ êµìœ¡ ìˆ˜ê°•",
                        "ì¥ê¸°ì  ìì‚° ì¦ì‹ ê³„íš ìˆ˜ë¦½ ë° ì‹¤í–‰"
                    ]
                }
            ],
            tips: [
                "ğŸ“Š **ë°ì´í„° ì¤‘ì‹¬**: ê°ì •ë³´ë‹¤ëŠ” ë°ì´í„°ì— ê¸°ë°˜í•œ íˆ¬ì ê²°ì •",
                "âš¡ **ë¹ ë¥¸ í•™ìŠµ**: ì‹œì¥ ë³€í™”ì— ë¹ ë¥´ê²Œ ì ì‘í•˜ê³  í•™ìŠµí•˜ê¸°", 
                "ğŸ¯ **ëª©í‘œ ì„¸ë¶„í™”**: í° ëª©í‘œë¥¼ ì‘ì€ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ë‹¬ì„±í•˜ê¸°",
                "ğŸ›¡ï¸ **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: ê³µê²©ì  íˆ¬ìì™€ ì•ˆì „ ì¥ì¹˜ì˜ ê· í˜• ë§ì¶”ê¸°"
            ]
        }
    }
};

// íŒ¨í„´ë³„ ë§ì¶¤ ì¡°ì–¸
const patternAdvice = {
    'íŒ”ë‘ê·€': {
        strengths: [
            'ì‚¬íšŒì  ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•œ ë‹¤ì–‘í•œ ì •ë³´ ìˆ˜ì§‘ ëŠ¥ë ¥',
            'íƒ€ì¸ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œí•˜ëŠ” í˜‘ë ¥ì  ì„±í–¥',
            'ìƒˆë¡œìš´ íˆ¬ì ê¸°íšŒì— ëŒ€í•œ ê°œë°©ì  íƒœë„'
        ],
        improvements: [
            'ë…ë¦½ì ì¸ íŒë‹¨ë ¥ ê°•í™” í•„ìš”',
            'íˆ¬ì ê²°ì • ì‹œ ê°ê´€ì  ë¶„ì„ ìŠµê´€ ê¸°ë¥´ê¸°',
            'íƒ€ì¸ì˜ ì˜ê²¬ì— íœ˜ë‘˜ë¦¬ì§€ ì•ŠëŠ” ì›ì¹™ ì„¸ìš°ê¸°'
        ],
        actionPlan: {
            shortTerm: ['íˆ¬ì ê³µë¶€ ì‹œì‘í•˜ê¸°', 'ê°œì¸ íˆ¬ì ì›ì¹™ ì„¸ìš°ê¸°', 'ì‹ ë¢°í•  ë§Œí•œ ì •ë³´ì› ì„ ë³„í•˜ê¸°'],
            mediumTerm: ['ë¶„ì‚° íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±', 'ì •ê¸°ì ì¸ íˆ¬ì ì„±ê³¼ ì ê²€', 'íˆ¬ì ì¼ê¸° ì‘ì„± ìŠµê´€'],
            longTerm: ['ë…ë¦½ì  íˆ¬ì ì˜ì‚¬ê²°ì • ì²´ê³„ êµ¬ì¶•', 'ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ íˆ¬ì ì§€ì‹ ìŠµë“', 'ë©˜í† ë§ ê´€ê³„ êµ¬ì¶•']
        }
    },
    'ì§ˆëŸ¬': {
        strengths: [
            'ë¹ ë¥¸ ì˜ì‚¬ê²°ì •ê³¼ ì‹¤í–‰ë ¥',
            'ìƒˆë¡œìš´ ê¸°íšŒì— ëŒ€í•œ ë¯¼ê°ì„±',
            'ë³€í™”ì— ëŒ€í•œ ì ì‘ë ¥ê³¼ ìœ ì—°ì„±'
        ],
        improvements: [
            'ê³„íšì ì¸ ìê¸ˆ ê´€ë¦¬ ìŠµê´€ ê¸°ë¥´ê¸°',
            'ì¶©ë™ì  íˆ¬ì ê²°ì • ì–µì œí•˜ê¸°',
            'ì¥ê¸°ì  ê´€ì ì˜ íˆ¬ì ì „ëµ ìˆ˜ë¦½'
        ],
        actionPlan: {
            shortTerm: ['ê°€ê³„ë¶€ ì‘ì„± ì‹œì‘', 'íˆ¬ì í•œë„ì•¡ ë¯¸ë¦¬ ì •í•˜ê¸°', 'ì¿¨ë‹¤ìš´ ê¸°ê°„ ë‘ê¸°'],
            mediumTerm: ['ì •ê¸° ì ê¸ˆ ìë™ì´ì²´ ì„¤ì •', 'íˆ¬ì ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°', 'ê°ì • ì¼ê¸° ì‘ì„±'],
            longTerm: ['ì¥ê¸° íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„±', 'ì¬ì •ì  ììœ  ë‹¬ì„± ê³„íš', 'íˆ¬ì ë©˜í†  ì°¾ê¸°']
        }
    },
    'ì™„ë²½': {
        strengths: [
            'ì² ì €í•œ ë¶„ì„ê³¼ ì‹ ì¤‘í•œ ì˜ì‚¬ê²°ì •',
            'ë¦¬ìŠ¤í¬ ê´€ë¦¬ ëŠ¥ë ¥',
            'ì¥ê¸°ì  ê´€ì ì˜ íˆ¬ì ì ‘ê·¼'
        ],
        improvements: [
            'ê³¼ë„í•œ ì‹ ì¤‘í•¨ìœ¼ë¡œ ì¸í•œ ê¸°íšŒ ìƒì‹¤ ì£¼ì˜',
            'ì ì • ìˆ˜ì¤€ì˜ ìœ„í—˜ ê°ìˆ˜ í•„ìš”',
            'ì™„ë²½ì„ ì¶”êµ¬í•˜ë‹¤ ë†“ì¹˜ëŠ” íˆ¬ì íƒ€ì´ë° ê°œì„ '
        ],
        actionPlan: {
            shortTerm: ['íˆ¬ì ê¸°ì¤€ì  ëª…í™•íˆ ì„¤ì •', 'ì†Œì•¡ íˆ¬ìë¡œ ê²½í—˜ ìŒ“ê¸°', 'íˆ¬ì íƒ€ì´ë° ì—°ìŠµ'],
            mediumTerm: ['ì ì§„ì  ìœ„í—˜ìì‚° ë¹„ì¤‘ ì¦ê°€', 'íˆ¬ì ì„±ê³¼ ì •ê¸° ê²€í† ', 'ì „ë¬¸ê°€ ìƒë‹´ ë°›ê¸°'],
            longTerm: ['ê· í˜•ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„±', 'ê¸€ë¡œë²Œ íˆ¬ì í™•ëŒ€', 'íˆ¬ì êµìœ¡ ì§€ì†']
        }
    },
    'ë‚˜ì˜ë‚˜': {
        strengths: [
            'ìì‹ ê° ìˆëŠ” íˆ¬ì íƒœë„',
            'ì„±ê³µì— ëŒ€í•œ ê°•í•œ ë™ê¸°',
            'ë¸Œëœë“œì™€ ê°€ì¹˜ì— ëŒ€í•œ ì•ˆëª©'
        ],
        improvements: [
            'ê³¼ì‹œìš•ìœ¼ë¡œ ì¸í•œ ê³¼ì†Œë¹„ ì£¼ì˜',
            'íˆ¬ì ì„±ê³¼ì— ëŒ€í•œ ê°ê´€ì  í‰ê°€',
            'í—ˆì˜ì‹¬ë³´ë‹¤ ì‹¤ì§ˆì  ê°€ì¹˜ ì¶”êµ¬'
        ],
        actionPlan: {
            shortTerm: ['íˆ¬ì ëª©ì  ëª…í™•íˆ í•˜ê¸°', 'ì†Œë¹„ íŒ¨í„´ ì ê²€í•˜ê¸°', 'íˆ¬ì ì„±ê³¼ ì¸¡ì • ê¸°ì¤€ ì„¸ìš°ê¸°'],
            mediumTerm: ['ê°€ì¹˜ íˆ¬ì ì›ì¹™ í™•ë¦½', 'ì¥ê¸° ìì‚° ì¦ì‹ ê³„íš', 'í•©ë¦¬ì  ì†Œë¹„ ìŠµê´€ ê¸°ë¥´ê¸°'],
            longTerm: ['ì§„ì •í•œ ë¶€ì˜ ì¶•ì  ë‹¬ì„±', 'ì‚¬íšŒì  ê°€ì¹˜ ì°½ì¶œ', 'í›„ì§„ ì–‘ì„±ê³¼ ë‚˜ëˆ”']
        }
    },
    'ìŸì·¨': {
        strengths: [
            'ë†’ì€ ëª©í‘œ ì˜ì‹ê³¼ ì„±ì·¨ìš•',
            'ê²½ìŸ ìƒí™©ì—ì„œì˜ ì§‘ì¤‘ë ¥',
            'ë¹ ë¥¸ í•™ìŠµ ëŠ¥ë ¥ê³¼ ì ì‘ë ¥'
        ],
        improvements: [
            'ê³¼ë„í•œ ìœ„í—˜ ì¶”êµ¬ ì„±í–¥ ì¡°ì ˆ',
            'ë‹¨ê¸° ì„±ê³¼ì— ì§‘ì°©í•˜ì§€ ì•Šê¸°',
            'ê°ì •ì  íˆ¬ì ê²°ì • ì¤„ì´ê¸°'
        ],
        actionPlan: {
            shortTerm: ['íˆ¬ì ëª©í‘œ êµ¬ì²´í™”í•˜ê¸°', 'ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì›ì¹™ ì„¸ìš°ê¸°', 'íˆ¬ì ì¼ì§€ ì‘ì„±í•˜ê¸°'],
            mediumTerm: ['ì²´ê³„ì  íˆ¬ì ì „ëµ ìˆ˜ë¦½', 'ë‹¤ì–‘í•œ íˆ¬ì ìƒí’ˆ ê²½í—˜', 'ì „ë¬¸ê°€ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•'],
            longTerm: ['íˆ¬ì ì „ë¬¸ê°€ ë˜ê¸°', 'ì°½ì—…ì´ë‚˜ ì‚¬ì—… ë„ì „', 'ê²½ì œì  ììœ  ë‹¬ì„±']
        }
    }
};

// ë¶„ì„ ê²°ê³¼ ë°ì´í„°
let analysisResult = null;

// ê²°ê³¼ í˜ì´ì§€ ì´ˆê¸°í™”
function initializeResultsPage() {
    console.log('ê²°ê³¼ í˜ì´ì§€ ì´ˆê¸°í™” ì¤‘...');
    
    // ì§„ë‹¨ ê²°ê³¼ í™•ì¸
    const answers = MoneyPattern.Storage.get('diagnosisAnswers');
    const patternResults = MoneyPattern.Storage.get('patternResults');
    const isCompleted = MoneyPattern.Storage.get('diagnosisCompleted');
    
    if (!answers || !isCompleted || !patternResults) {
        // ì§„ë‹¨ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ í™ˆìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        alert('ì§„ë‹¨ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì§„ë‹¨ì„ ì™„ë£Œí•´ ì£¼ì„¸ìš”.');
        window.location.href = 'index.html';
        return;
    }
    
    console.log('ì €ì¥ëœ íŒ¨í„´ ê²°ê³¼:', patternResults);
    
    // ë¶„ì„ ê²°ê³¼ ì„¤ì •
    analysisResult = patternResults;
    
    // ê²°ê³¼ í‘œì‹œ
    displayResults(analysisResult);
    
    // ì°¨íŠ¸ ì´ˆê¸°í™”
    setTimeout(() => {
        initializeCharts(analysisResult);
    }, 500);
}

// ê²°ê³¼ í‘œì‹œ
function displayResults(result) {
    console.log('ê²°ê³¼ í‘œì‹œ ì¤‘...', result);
    
    const primaryPattern = patternTypes[result.primaryPattern];
    const secondaryPattern = patternTypes[result.secondaryPattern];
    const patternContent = patternContents[result.primaryPattern];
    
    if (!primaryPattern || !patternContent) {
        console.error('íŒ¨í„´ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', result.primaryPattern);
        return;
    }
    
    // ë©”ì¸ ê²°ê³¼ ì¹´ë“œ ì—…ë°ì´íŠ¸ (HOOK í¬í•¨)
    document.getElementById('pattern-icon').textContent = primaryPattern.emoji;
    document.getElementById('pattern-type').textContent = `${primaryPattern.name} (ì£¼ê¸°ì§ˆ)`;
    
    // ì„¤ëª… í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
    let descriptionText = primaryPattern.description;
    if (secondaryPattern) {
        descriptionText += ` ë¶€ê¸°ì§ˆë¡œëŠ” ${secondaryPattern.name} ì„±í–¥ë„ í•¨ê»˜ ê°€ì§€ê³  ìˆì–´, ${secondaryPattern.shortDescription} ë©´ë„ ë³´ì…ë‹ˆë‹¤.`;
    }
    document.getElementById('pattern-description').textContent = descriptionText;
    document.getElementById('hook-text').textContent = patternContent.hook;
    
    // ë°°ê²½ìƒ‰ ë³€ê²½
    const headerCard = document.getElementById('main-result-card');
    if (headerCard) {
        headerCard.className = `bg-gradient-to-r ${primaryPattern.gradient} text-white rounded-3xl p-8 md:p-12 mb-12 shadow-2xl`;
    }
    
    // INSIGHT ì„¹ì…˜ ì—…ë°ì´íŠ¸
    updateInsightSection(patternContent.insight);
    
    // DEEP-DIVE ì„¹ì…˜ ì—…ë°ì´íŠ¸  
    updateDeepDiveSection(patternContent.deepDive);
    
    // ACTION ì„¹ì…˜ ì—…ë°ì´íŠ¸
    updateActionSection(patternContent.action);
    
    // ì„¸ë¶€ ë¶„ì„ ê²°ê³¼ ì—…ë°ì´íŠ¸
    updateDetailedAnalysis(result);
    
    // ì¶”ì²œì‚¬í•­ í‘œì‹œ (ê¸°ì¡´ ë°©ì‹ ìœ ì§€)
    updateRecommendations(result);
}

// INSIGHT ì„¹ì…˜ ì—…ë°ì´íŠ¸
function updateInsightSection(insight) {
    const insightContent = document.getElementById('insight-content');
    if (!insightContent || !insight) return;
    
    insightContent.innerHTML = `
        <div class="mb-6">
            <h5 class="text-xl font-bold text-gray-800 mb-4">${insight.title}</h5>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                ${insight.points.map(point => `
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <p class="text-gray-700">${point}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

// DEEP-DIVE ì„¹ì…˜ ì—…ë°ì´íŠ¸
function updateDeepDiveSection(deepDive) {
    const deepDiveContent = document.getElementById('deep-dive-content');
    if (!deepDiveContent || !deepDive) return;
    
    deepDiveContent.innerHTML = `
        <div>
            <h5 class="text-xl font-bold text-gray-800 mb-6">${deepDive.title}</h5>
            <div class="space-y-6">
                ${deepDive.content.map(item => `
                    <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm">
                        <h6 class="text-lg font-semibold text-gray-800 mb-3">${item.subtitle}</h6>
                        <p class="text-gray-700 leading-relaxed">${item.description}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

// ACTION ì„¹ì…˜ ì—…ë°ì´íŠ¸
function updateActionSection(action) {
    const actionContent = document.getElementById('action-content');
    if (!actionContent || !action) return;
    
    const phasesHtml = action.phases.map(phase => `
        <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm mb-6">
            <h6 class="text-xl font-bold mb-4">${phase.phase}</h6>
            <ul class="space-y-2">
                ${phase.items.map(item => `
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-300 mr-3 mt-1 flex-shrink-0"></i>
                        <span class="opacity-90">${item}</span>
                    </li>
                `).join('')}
            </ul>
        </div>
    `).join('');
    
    const tipsHtml = action.tips.map(tip => `
        <div class="bg-white/10 rounded-lg p-4 border border-white/20">
            <p class="text-sm opacity-90">${tip}</p>
        </div>
    `).join('');
    
    actionContent.innerHTML = `
        <div>
            <h5 class="text-xl font-bold mb-6">${action.title}</h5>
            ${phasesHtml}
            <div class="border-t border-white/20 pt-6">
                <h6 class="text-lg font-semibold mb-4">ğŸ’¡ í•µì‹¬ íŒ</h6>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${tipsHtml}
                </div>
            </div>
        </div>
    `;
}

// ì„¸ë¶€ ë¶„ì„ ì—…ë°ì´íŠ¸
function updateDetailedAnalysis(result) {
    console.log('ì„¸ë¶€ ë¶„ì„ ì—…ë°ì´íŠ¸ ì¤‘...', result);
    
    // íˆ¬ì ì„±í–¥ ì„¹ì…˜ ì—…ë°ì´íŠ¸
    const primaryPattern = patternTypes[result.primaryPattern];
    const characteristics = primaryPattern.characteristics;
    
    // íŠ¹ì„±ë³„ ë°±ë¶„ìœ¨ ê³„ì‚° (ëœë¤ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì‹œê°ì  íš¨ê³¼)
    const maxScore = Math.max(...Object.values(result.scores));
    const primaryScore = result.scores[result.primaryPattern];
    const basePercentage = maxScore > 0 ? (primaryScore / (maxScore * 1.2)) * 100 : 70;
    
    // íˆ¬ì ì„±í–¥ ì—…ë°ì´íŠ¸ 
    updateProgressBar('investment-style', 'ë³´ìˆ˜ì„±', 
        result.primaryPattern === 'ì™„ë²½' ? Math.min(95, basePercentage + 20) : Math.max(30, basePercentage - 10), 
        primaryPattern.color);
    updateProgressBar('investment-style', 'ì ê·¹ì„±', 
        ['ì§ˆëŸ¬', 'ìŸì·¨'].includes(result.primaryPattern) ? Math.min(95, basePercentage + 15) : Math.max(25, basePercentage - 15), 
        primaryPattern.color);
    updateProgressBar('investment-style', 'ì¥ê¸° ê´€ì ', 
        ['ì™„ë²½', 'ìŸì·¨'].includes(result.primaryPattern) ? Math.min(90, basePercentage + 10) : Math.max(40, basePercentage - 5), 
        primaryPattern.color);
    
    // ì†Œë¹„ íŒ¨í„´ ì—…ë°ì´íŠ¸
    updateProgressBar('spending-pattern', 'ê³„íšì„±', 
        result.primaryPattern === 'ì™„ë²½' ? Math.min(95, basePercentage + 25) : Math.max(20, basePercentage - 20), 
        primaryPattern.color);
    updateProgressBar('spending-pattern', 'ì¶©ë™ì„±', 
        result.primaryPattern === 'ì§ˆëŸ¬' ? Math.min(90, basePercentage + 20) : Math.max(15, basePercentage - 25), 
        '#ef4444');
    updateProgressBar('spending-pattern', 'ì ˆì•½ì„±', 
        ['ì™„ë²½', 'íŒ”ë‘ê·€'].includes(result.primaryPattern) ? Math.min(85, basePercentage + 15) : Math.max(35, basePercentage - 10), 
        '#10b981');
}

// ì§„í–‰ë°” ì—…ë°ì´íŠ¸ í—¬í¼
function updateProgressBar(containerId, label, percentage, color) {
    const container = document.getElementById(containerId);
    if (!container) return;
    
    const progressBars = container.querySelectorAll('.flex.justify-between.items-center');
    
    progressBars.forEach(bar => {
        const labelElement = bar.querySelector('.text-gray-700');
        if (labelElement && labelElement.textContent === label) {
            const progressBar = bar.querySelector('.w-20 > div');
            const percentageText = bar.querySelector('.text-sm.font-semibold');
            
            if (progressBar && percentageText) {
                progressBar.style.width = `${Math.round(percentage)}%`;
                progressBar.style.backgroundColor = color;
                percentageText.textContent = `${Math.round(percentage)}%`;
                percentageText.style.color = color;
            }
        }
    });
}

// ì¶”ì²œì‚¬í•­ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ë°©ì‹ê³¼ í˜¸í™˜ì„± ìœ ì§€)
function updateRecommendations(result) {
    const advice = patternAdvice[result.primaryPattern];
    if (!advice) {
        // patternContentsì—ì„œ ê°€ì ¸ì˜¤ê¸°
        const content = patternContents[result.primaryPattern];
        if (!content) return;
        
        // ê¸°ë³¸ ê°•ì /ê°œì„ ì  ìƒì„±
        const defaultAdvice = {
            strengths: patternTypes[result.primaryPattern].characteristics || [],
            improvements: ['ì§€ì†ì ì¸ í•™ìŠµê³¼ ê°œì„ ', 'ê· í˜•ì¡íŒ íˆ¬ì ì ‘ê·¼', 'ë¦¬ìŠ¤í¬ ê´€ë¦¬ ê°•í™”']
        };
        
        updateStrengthsAndImprovements(defaultAdvice);
        return;
    }
    
    updateStrengthsAndImprovements(advice);
}

// ê°•ì ê³¼ ê°œì„ ì  ì—…ë°ì´íŠ¸ í—¬í¼ í•¨ìˆ˜
function updateStrengthsAndImprovements(advice) {
    // ê°•ì  ì—…ë°ì´íŠ¸
    const strengthsList = document.getElementById('strengths');
    if (strengthsList && advice.strengths) {
        strengthsList.innerHTML = '';
        advice.strengths.slice(0, 3).forEach(strength => {
            const li = document.createElement('li');
            li.className = 'text-xs';
            li.innerHTML = `â€¢ ${strength}`;
            strengthsList.appendChild(li);
        });
    }
    
    // ê°œì„ ì  ì—…ë°ì´íŠ¸
    const improvementsList = document.getElementById('improvements');
    if (improvementsList && advice.improvements) {
        improvementsList.innerHTML = '';
        advice.improvements.slice(0, 3).forEach(improvement => {
            const li = document.createElement('li');
            li.className = 'text-xs';
            li.innerHTML = `â€¢ ${improvement}`;
            improvementsList.appendChild(li);
        });
    }
}

// ì°¨íŠ¸ ì´ˆê¸°í™”
function initializeCharts(result) {
    try {
        createPersonalityChart(result);
        createRiskChart(result);
    } catch (error) {
        console.error('ì°¨íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
    }
}

// ì„±í–¥ ë¶„ì„ ì°¨íŠ¸
function createPersonalityChart(result) {
    const ctx = document.getElementById('personalityChart');
    if (!ctx) return;
    
    const ctxContext = ctx.getContext('2d');
    const scores = result.scores;
    const patterns = Object.keys(scores);
    const values = Object.values(scores);
    
    const data = {
        labels: patterns,
        datasets: [{
            label: 'íŒ¨í„´ë³„ ì ìˆ˜',
            data: values,
            backgroundColor: patterns.map(pattern => {
                const patternInfo = patternTypes[pattern];
                return patternInfo ? patternInfo.color + '80' : '#3b82f680'; // íˆ¬ëª…ë„ ì¶”ê°€
            }),
            borderColor: patterns.map(pattern => {
                const patternInfo = patternTypes[pattern];
                return patternInfo ? patternInfo.color : '#3b82f6';
            }),
            borderWidth: 2
        }]
    };
    
    new Chart(ctxContext, {
        type: 'radar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                r: {
                    angleLines: {
                        display: true
                    },
                    suggestedMin: 0,
                    suggestedMax: Math.max(...values) + 2,
                    ticks: {
                        stepSize: 2
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
}

// ìœ„í—˜ ìˆ˜ìš©ë„ ì°¨íŠ¸
function createRiskChart(result) {
    const ctx = document.getElementById('riskChart');
    if (!ctx) return;
    
    const ctxContext = ctx.getContext('2d');
    const primaryPattern = result.primaryPattern;
    
    // íŒ¨í„´ë³„ ìœ„í—˜ ìˆ˜ìš©ë„ ë§¤í•‘
    const riskLevels = {
        'ì™„ë²½': { level: 'ë‚®ìŒ', color: '#10b981', value: 30 },
        'íŒ”ë‘ê·€': { level: 'ë³´í†µ-ë‚®ìŒ', color: '#f59e0b', value: 45 },
        'ë‚˜ì˜ë‚˜': { level: 'ë³´í†µ', color: '#8b5cf6', value: 60 },
        'ì§ˆëŸ¬': { level: 'ë³´í†µ-ë†’ìŒ', color: '#ef4444', value: 75 },
        'ìŸì·¨': { level: 'ë†’ìŒ', color: '#3b82f6', value: 85 }
    };
    
    const currentRisk = riskLevels[primaryPattern] || riskLevels['íŒ”ë‘ê·€'];
    
    new Chart(ctxContext, {
        type: 'doughnut',
        data: {
            labels: ['ìœ„í—˜ ìˆ˜ìš©ë„', 'ì•ˆì „ ì„ í˜¸ë„'],
            datasets: [{
                data: [currentRisk.value, 100 - currentRisk.value],
                backgroundColor: [currentRisk.color, '#e5e7eb'],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom'
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            if (context.dataIndex === 0) {
                                return `ìœ„í—˜ ìˆ˜ìš©ë„: ${currentRisk.level} (${context.parsed}%)`;
                            } else {
                                return `ì•ˆì „ ì„ í˜¸ë„: ${context.parsed}%`;
                            }
                        }
                    }
                }
            }
        }
    });
}

// ì•¡ì…˜ í•¨ìˆ˜ë“¤
function downloadReport() {
    alert('ê²°ê³¼ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
}

function shareResults() {
    const shareText = `ë‚˜ì˜ ë°±ë§Œì¥ì ë¨¸ë‹ˆíŒ¨í„´: ${patternTypes[analysisResult.primaryPattern].name}\n${window.location.href}`;
    
    if (navigator.share) {
        navigator.share({
            title: 'ë°±ë§Œì¥ì ë¨¸ë‹ˆíŒ¨í„´ ì§„ë‹¨ ê²°ê³¼',
            text: shareText,
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(shareText).then(() => {
            MoneyPattern.showSuccessMessage('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }).catch(() => {
            alert('ê²°ê³¼ ê³µìœ  ë§í¬ë¥¼ ë³µì‚¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        });
    }
}

function retakeTest() {
    if (confirm('ìƒˆë¡œìš´ ì§„ë‹¨ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ê²°ê³¼ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) {
        MoneyPattern.Storage.remove('diagnosisAnswers');
        MoneyPattern.Storage.remove('patternResults');
        MoneyPattern.Storage.remove('patternScores');
        MoneyPattern.Storage.remove('diagnosisCompleted');
        window.location.href = 'diagnosis.html';
    }
}

// EmailJS ì„¤ì • ë° ì´ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥
class EmailService {
    constructor() {
        // EmailJS ì´ˆê¸°í™”
        this.publicKey = 'R_oWqjQhyn1mSaaKU';
        this.serviceId = 'service_dki5pkx';
        this.adminTemplateId = 'template_hdsco7h';
        this.customerTemplateId = 'template_dln2vl3';
        
        this.initEmailJS();
        this.setupEmailForm();
    }

    initEmailJS() {
        emailjs.init(this.publicKey);
        console.log('EmailJS ì´ˆê¸°í™”ë¨ - ì •ë°€ì§„ë‹¨');
    }

    setupEmailForm() {
        const form = document.getElementById('emailForm');
        if (form) {
            form.addEventListener('submit', (e) => this.handleEmailSubmit(e));
        }
    }

    async handleEmailSubmit(e) {
        e.preventDefault();
        
        const formData = new FormData(e.target);
        const userData = {
            user_name: formData.get('user_name'),
            user_email: formData.get('user_email'),
            user_phone: formData.get('user_phone') || 'ë¯¸ì œê³µ',
            consultation_request: formData.get('consultation_request') ? 'ìƒë‹´ í¬ë§' : 'ìƒë‹´ ë¶ˆí•„ìš”'
        };

        // ìœ íš¨ì„± ê²€ì‚¬
        if (!userData.user_name || !userData.user_email) {
            alert('ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        if (!document.getElementById('privacyAgree').checked) {
            alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
            return;
        }

        // ì§„ë‹¨ ê²°ê³¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const results = this.getStoredResults();
        
        try {
            this.showLoadingStatus();
            
            // 1. ê´€ë¦¬ìì—ê²Œ ì´ë©”ì¼ ì „ì†¡
            await this.sendAdminEmail(userData, results);
            
            // 2. ê³ ê°ì—ê²Œ ì´ë©”ì¼ ì „ì†¡
            await this.sendCustomerEmail(userData, results);
            
            this.showSuccessStatus();
            
            // í¼ ë¹„í™œì„±í™”
            document.getElementById('emailForm').style.display = 'none';
            
        } catch (error) {
            console.error('ì´ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨:', error);
            this.showErrorStatus(error.message);
        }
    }

    getStoredResults() {
        // ì •ë°€ì§„ë‹¨ ê²°ê³¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const patternResults = MoneyPattern.Storage.get('patternResults');
        const patternScores = MoneyPattern.Storage.get('patternScores');
        
        return {
            patternResults,
            patternScores,
            primaryPattern: analysisResult?.primaryPattern,
            secondaryPattern: analysisResult?.secondaryPattern
        };
    }

    async sendAdminEmail(userData, results) {
        const patternNames = {
            'íŒ”ë‘ê·€': 'íŒ”ë‘ê·€í˜• - ì£¼ë³€ ì˜ê²¬ ì˜í–¥í˜•',
            'ì§ˆëŸ¬': 'ì§ˆëŸ¬í˜• - ì¶©ë™ ì†Œë¹„í˜•',
            'ì™„ë²½': 'ì™„ë²½í˜• - ì‹ ì¤‘ ê³„íší˜•',
            'ë‚˜ì˜ë‚˜': 'ë‚˜ì˜ë‚˜í˜• - ìê¸°ê³¼ì‹œí˜•',
            'ìŸì·¨': 'ìŸì·¨í˜• - ì„±ì·¨ìš• ê°•í•¨í˜•'
        };

        const templateParams = {
            user_name: userData.user_name,
            user_email: userData.user_email,
            user_phone: userData.user_phone,
            consultation_request: userData.consultation_request,
            diagnosis_type: '20ë¬¸í•­ ì •ë°€ ë¨¸ë‹ˆíŒ¨í„´',
            primary_pattern: results.primaryPattern ? patternNames[results.primaryPattern] : 'ë°ì´í„° ì—†ìŒ',
            secondary_pattern: results.secondaryPattern ? patternNames[results.secondaryPattern] : 'ë°ì´í„° ì—†ìŒ',
            diagnosis_time: new Date().toLocaleString('ko-KR'),
            admin_email: 'habin0781@naver.com'
        };

        console.log('ê´€ë¦¬ì ì´ë©”ì¼ ì „ì†¡:', templateParams);
        return emailjs.send(this.serviceId, this.adminTemplateId, templateParams);
    }

    async sendCustomerEmail(userData, results) {
        const patternData = {
            'íŒ”ë‘ê·€': { name: 'íŒ”ë‘ê·€í˜•', desc: 'ì£¼ë³€ ì˜ê²¬ê³¼ ì¶”ì²œì— ì‰½ê²Œ ì˜í–¥ë°›ëŠ” ì‚¬íšŒì  ê´€ê³„ ì¤‘ì‹¬ì˜ íˆ¬ìì' },
            'ì§ˆëŸ¬': { name: 'ì§ˆëŸ¬í˜•', desc: 'ì¶©ë™ì ì´ê³  ì¦‰í¥ì  ê²°ì •ì„ ì„ í˜¸í•˜ëŠ” ê°ì •ì  íˆ¬ìì' },
            'ì™„ë²½': { name: 'ì™„ë²½í˜•', desc: 'ì‹ ì¤‘í•˜ê³  ê³„íšì  ì ‘ê·¼ì„ í•˜ëŠ” ì•ˆì •ì„± ì¶”êµ¬ íˆ¬ìì' },
            'ë‚˜ì˜ë‚˜': { name: 'ë‚˜ì˜ë‚˜í˜•', desc: 'ìê¸°í‘œí˜„ê³¼ ê³¼ì‹œë¥¼ ì¤‘ì‹œí•˜ëŠ” ìŠ¤íƒ€ì¼ ì¶”êµ¬ íˆ¬ìì' },
            'ìŸì·¨': { name: 'ìŸì·¨í˜•', desc: 'ëª©í‘œë‹¬ì„±ê³¼ ê²½ìŸì—ì„œ ì´ê¸°ëŠ” ê²ƒì„ ì¤‘ì‹œí•˜ëŠ” ì„±ì·¨ì§€í–¥ íˆ¬ìì' }
        };

        const primaryPattern = results.primaryPattern || 'íŒ”ë‘ê·€';
        const patternInfo = patternData[primaryPattern];

        const templateParams = {
            user_name: userData.user_name,
            user_email: userData.user_email,
            primary_pattern: patternInfo.name,
            result_summary: patternInfo.desc,
            detailed_analysis: `ë‹¹ì‹ ì˜ ì£¼ìš” ë¨¸ë‹ˆíŒ¨í„´ì€ ${patternInfo.name} ìœ í˜•ì…ë‹ˆë‹¤. ${patternInfo.desc} ì´ëŸ¬í•œ ì„±í–¥ì„ ë°”íƒ•ìœ¼ë¡œ ê°œì¸ ë§ì¶¤ íˆ¬ì ì „ëµì„ ìˆ˜ë¦½í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
            contact_email: 'habin0781@naver.com'
        };

        console.log('ê³ ê° ì´ë©”ì¼ ì „ì†¡:', templateParams);
        return emailjs.send(this.serviceId, this.customerTemplateId, templateParams);
    }

    showLoadingStatus() {
        document.getElementById('emailStatus').classList.remove('hidden');
        document.getElementById('emailSuccess').classList.add('hidden');
        document.getElementById('sendEmailBtn').disabled = true;
    }

    showSuccessStatus() {
        document.getElementById('emailStatus').classList.add('hidden');
        document.getElementById('emailSuccess').classList.remove('hidden');
    }

    showErrorStatus(message) {
        document.getElementById('emailStatus').classList.add('hidden');
        const errorDiv = document.createElement('div');
        errorDiv.className = 'mt-4 text-center bg-red-500/20 border border-red-300 rounded-lg p-4';
        errorDiv.innerHTML = `<i class="fas fa-exclamation-triangle mr-2"></i>ì „ì†¡ ì‹¤íŒ¨: ${message}`;
        document.getElementById('emailSuccess').parentNode.appendChild(errorDiv);
        document.getElementById('sendEmailBtn').disabled = false;
    }
}

// ê²°ê³¼ í˜ì´ì§€ ì „ìš© ì´ˆê¸°í™”
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        initializeResultsPage();
        new EmailService(); // EmailJS ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
    });
} else {
    initializeResultsPage();
    new EmailService(); // EmailJS ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
}